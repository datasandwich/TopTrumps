@model TopTrumps.Models.Game
@{
    ViewData["Title"] = "Index";
}
<h1>Game On</h1>
<h2 class="text-center mb-5 "> @Model.inPlay.Name</h2>
<div class="mt-5 d-flex justify-content-between">
    @{
        var p2card = Model.player2.PlayerHand.PeekCard();
        var p1card = Model.player1.PlayerHand.PeekCard();
        int attributeChoice = 0;
    }

  @*based on who is chosen to start the game the appropriet inPlayview should be displayed
    if player1 is the one to start the player1 deck is face up
    which game property tells me who is starting the game?
    *@



  @*<input type="hidden" name = "player1" value="@Model.player1"  />
    <input type="hidden" name = "player2"  value="@Model.player2"  />
    <input type="hidden" name = "inPlay"  value="@Model.inPlay"  />
    <input type="hidden" name = "mode"  value="@Model.mode"  />
    <input type="hidden" name = "attributes" value="@Model.attributes"  /> *@

    @*Front of player 1 card*@
    @if (Model.player1.IsActivePlayer)
    {
        <div class="card mb-3  bg-dark border-primary justify-content-between" style="width:20rem; height:30rem; ">
            <h4 class="card-title text-center">@p1card.getName()</h4>
            @{
                if (p1card.Description != null)
                {
                    <div class="d-flex flex-row h-50 w-100 justify-content-between">
                        <img class="w-100" style="object-position: 0 0;" src="@p1card.getImage()" />

                        <p class=" my-auto">@p1card.Description</p>
                    </div>

                }
                else
                {
                    <div style="height:50%; width:100%;">
                        <img class="w-100 " style="object-position: 0 0;" src="@p1card.getImage()" />
                    </div>
                }
            }


            @for (int i = 0; i < 5; i++)
            {

                <div class="d-flex flex-column justify-content-center form-group">
                    <input type="radio" class="btn-check" id="p1 @i" value="@i" asp-for="p1 @i" onclick="@attributeChoice=@i;" />
                    @{
                        var high = (5 - i) * 2;
                    }
                    <label class="btn btn-outline-primary" for="p1 @i">@Model.attributes.getAttr(i) : @p1card.getattr(i)</label>
                </div>
            }
        </div>
    }
    else
    {
        @*Back cover of player 1 card*@
        <div class="card mb-3 border-primary" style="max-width:20rem; height:30rem; ">
            <img src=@Model.inPlay.ImagePath class="h-100" style="object-fit:cover" />
        </div>
    }
    @*Confirm Choice button*@
    <button type="submit" value="1" name="confirm" class="btn btn-outline-primary btn-lg align-self-auto" asp-action="Choice/@p1card.getattr(attributeChoice)/@p2card.getattr(attributeChoice)" onclick="@if(TempData["winner"]!=null){Model.addWinnings(Int32.Parse(TempData["winner"].ToString()));}">
        Confirm your choice
    </button>



    @*///////////////////////////////////////////////////////////////////////*@

    @*Front of player 2 card*@
    @{
        @if (Model.player2.IsActivePlayer)
        {
            <div class="card mb-3 justify-content-between bg-dark border-primary" style="width:20rem; height:30rem; ">
                <h4 class="card-title text-center">@p2card.getName()</h4>
                @{
                    if (p2card.Description != null)
                    {
                        <div class="d-flex flex-row h-50 w-100">
                            <img class="w-100 flex-grow-1" style="object-position: 0 0;" src="@p2card.getImage()" />

                            <p class="p-1 my-auto">@p2card.Description</p>
                        </div>

                    }
                    else
                    {
                        <div style="height:50%; width:100%;">
                            <img class="w-100 " style="object-position: 0 0;" src="@p2card.getImage()" />
                        </div>
                    }
                }

                @{
                    <form>
                        @for (int i = 0; i < 5; i++)
                        {

                            <div class="d-flex flex-column justify-content-center form-group">
                                <input type="radio" name="attributeChoice" class="btn-check" value="@p2card.getattr(@i)" id="p2 @i" asp-for="p2 @i" onclick="@attributeChoice=@i;" />
                                <label class="btn btn-outline-primary" for="p2 @i">@Model.attributes.getAttr(i) : @p2card.getattr(i)</label>
                            </div>
                        }
                    </form>
                }

            </div>

        }
        else
        @*Back cover of player 2 card*@
        {
            <div class="card mb-3 border-primary" style="max-width:20rem; height:30rem; ">
                <img src=@Model.inPlay.ImagePath class="h-100" style="object-fit:cover" />
            </div>
        }
    }
</div>
